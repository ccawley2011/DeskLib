#	Library-making makefile

CC		=	cc
LIBFILE		=	LibFile

CCFlags		=	-c -fahi -depend !Depend -throwback -I,C: -D_DeskLib_Debug
LibFileFlags	=	-c -o

TargetDir	=	<DeskLib$Dir>.o.Debug



VPATH = @ @.^



ALL:				\
	$(TargetDir).stderr	\
	$(TargetDir).uniquepipe	\
	$(TargetDir).heapgraph	\
	$(TargetDir).pipetype	\
	$(TargetDir).Signal	\
	$(TargetDir).uniquefile	\


# If anyone knows how to automate these, please let me know!


$(TargetDir).Signal:	o.Signal
	$(LIBFILE) $(LibFileFlags) $@ o.Signal

$(TargetDir).pipetype:	o.pipetype o.Debug
	$(LIBFILE) $(LibFileFlags) $@ o.pipetype o.Debug

$(TargetDir).uniquepipe:	o.uniquepipe o.Debug
	$(LIBFILE) $(LibFileFlags) $@ o.uniquepipe o.Debug

$(TargetDir).stderr:	o.stderr o.Debug
	$(LIBFILE) $(LibFileFlags) $@ o.stderr o.Debug

$(TargetDir).heapgraph:	o.heapgraph o.Debug
	$(LIBFILE) $(LibFileFlags) $@ o.heapgraph o.Debug

$(TargetDir).uniquefile:	o.uniquefile o.Debug
	$(LIBFILE) $(LibFileFlags) $@ o.uniquefile o.Debug




.SUFFIXES:	.o .c
.c.o:
	$(CC) $(CCFlags) -o $@ $<


# Dynamic dependencies:
o.Level:	c.Level
o.Level:	DeskLib:h.Debug
o.Level:	DeskLib:h.Core
o.stderr:	c.stderr
o.stderr:	DeskLib:h.Debug
o.stderr:	DeskLib:h.Core
o.stderr:	DeskLib:h.Error
o.uniquepipe:	c.uniquepipe
o.uniquepipe:	DeskLib:h.Error
o.uniquepipe:	DeskLib:h.Core
o.uniquepipe:	DeskLib:h.Debug
o.uniquepipe:	DeskLib:h.Str
o.heapgraph:	c.heapgraph
o.heapgraph:	DeskLib:h.Debug
o.heapgraph:	DeskLib:h.Core
o.heapgraph:	DeskLib:h.Error
o.heapgraph:	C:HeapGraph.h.Debug
o.heapgraph:	C:HeapGraph.h.Sendf
o.pipetype:	c.pipetype
o.pipetype:	DeskLib:h.Error
o.pipetype:	DeskLib:h.Core
o.pipetype:	DeskLib:h.WimpSWIs
o.pipetype:	DeskLib:h.Wimp
o.pipetype:	DeskLib:h.Debug
o.pipetype:	DeskLib:h.Str
o.Signal:	c.Signal
o.Signal:	DeskLib:h.Debug
o.Signal:	DeskLib:h.Core
o.Signal:	DeskLib:h.Error
o.Signal:	DeskLib:h.Event
o.Signal:	DeskLib:h.Wimp
o.Signal:	DeskLib:h.Error
o.uniquefile:	c.uniquefile
o.uniquefile:	DeskLib:h.Error
o.uniquefile:	DeskLib:h.Core
o.uniquefile:	DeskLib:h.Str
o.uniquefile:	DeskLib:h.Debug
o.Debug:	c.Debug
o.Debug:	DeskLib:h.Debug
o.Debug:	DeskLib:h.Core
o.Debug:	DeskLib:h.Error
